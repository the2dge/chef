<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Chef Xiao Yu</title>
  <style>
@charset "UTF-8";
@import url("https://use.typekit.net/euz1eqv.css");

/* Reset styles */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }
audio, canvas, video { display: inline-block; }
audio:not([controls]) { display: none; height: 0; }
[hidden] { display: none; }
html { font-family: sans-serif; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; }
body { margin: 0; }
a:focus { outline: thin dotted; }
a:active, a:hover { outline: 0; }
h1 { font-size: 2em; margin: 0.67em 0; }
abbr[title] { border-bottom: 1px dotted; }
b, strong { font-weight: bold; }
dfn { font-style: italic; }
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }
mark { background: #ff0; color: #000; }
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }
pre { white-space: pre-wrap; }
q { quotes: """ """ "'" "'"; }
small { font-size: 80%; }
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }
sup { top: -0.5em; }
sub { bottom: -0.25em; }
img { border: 0; }
svg:not(:root) { overflow: hidden; }
figure { margin: 0; }
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }
legend { border: 0; padding: 0; }
button, input, select, textarea { font-family: inherit; font-size: 100%; margin: 0; }
button, input { line-height: normal; }
button, select { text-transform: none; }
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; cursor: pointer; }
button[disabled], html input[disabled] { cursor: default; }
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; padding: 0; }
input[type="search"] { -webkit-appearance: textfield; -moz-box-sizing: content-box; -webkit-box-sizing: content-box; box-sizing: content-box; }
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }
textarea { overflow: auto; vertical-align: top; }
table { border-collapse: collapse; border-spacing: 0; }

*, *::after, *::before { box-sizing: border-box; }
::selection { background-color: grey; color: white; }
::-moz-selection { background-color: grey; color: white; }

html {
  background: #fff;
  -moz-osx-font-smoothing: grayscale;
  -webkit-font-smoothing: antialiased;
}

body {
  background-color: #23272a;
}

header {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 115px;
  z-index: 10;
  background-image: url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/123024/menutexture.png);
  background-position: center top;
  background-size: auto 200px;
  background-repeat: repeat-x;
}

header .inner {
  max-width: 1060px;
  margin: 0 auto;
  display: flex;
  height: 70px;
  align-items: center;
  justify-content: center;
  position: relative;
}

header .logo {
  display: block;
  width: 60px;
  height: 50px;
  position: absolute;
  top: 0;
  left: 0;
  text-align: center;
  font-size: 40px;
  color: white;
}

header nav {
  display: none;
}

header nav a {
  font-family: "Arial", serif;
  font-size: 12px;
  color: #8c8c8e;
  text-transform: uppercase;
  letter-spacing: 3px;
  text-decoration: none;
  margin: 0 18px;
}

header nav a.active, header nav a:hover {
  color: white;
}

@media screen and (min-width: 800px) {
  header nav {
    display: block;
  }
}

header .burger {
  display: block;
  position: relative;
  top: -6px;
  padding-left: 30px;
}

header .burger:before {
  content: "";
  position: absolute;
  left: 0;
  top: 0;
  width: 30px;
  height: 2px;
  background: white;
  box-shadow: 0 12px 0 0 white, 0 6px 0 0 white;
}

@media screen and (min-width: 800px) {
  header .burger {
    display: none;
  }
}

header .donate-link {
  width: 72px;
  text-align: center;
  position: absolute;
  right: 10px;
  top: 27px;
  font-family: "Arial", sans-serif;
  font-size: 12px;
  color: white;
  text-transform: uppercase;
  letter-spacing: 3px;
  text-decoration: none;
  padding-bottom: 6px;
  border-bottom: 2px solid rgba(255, 255, 255, 0.3);
}

main {
  position: relative;
  width: 100%;
}

#slider {
  width: 100%;
  max-width: 1200px;
  height: 100vh;
  margin: 0 auto;
  position: relative;
  overflow: hidden;
}

/* Mobile-only viewport fixes */
@media screen and (max-width: 768px) {
  #slider {
    height: 100vh;
    height: calc(var(--vh, 1vh) * 100);
    min-height: 100vh;
    min-height: calc(var(--vh, 1vh) * 100);
  }
  
  /* Mobile Safari specific fix */
  @supports (-webkit-touch-callout: none) {
    #slider {
      height: -webkit-fill-available;
      min-height: -webkit-fill-available;
    }
  }
  
  body {
    min-height: 100vh;
    min-height: calc(var(--vh, 1vh) * 100);
  }
  
  main {
    min-height: 100vh;
    min-height: calc(var(--vh, 1vh) * 100);
  }
}

#slider canvas {
  width: 150%;
  height: 150%;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 2;
}

#slider img {
  width: 100%;
  height: 100%;
  max-width: 100%;
  position: absolute;
  top: 0;
  left: 0;
  z-index: 0;
  opacity: 0;
  object-fit: cover;
}

.slider-inner {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  max-width: 1060px;
  height: 100%;
  margin: 0 auto;
  z-index: 5;
}

#slider-content {
  padding: 0 10px;
}

#slider-content h2 {
  font-family: "acta-display", serif;
  font-weight: 400;
  font-size: 30px;
  letter-spacing: -1px;
  color: white;
  line-height: 30px;
  margin: 20px 0 60px;
}

@media screen and (min-width: 800px) {
  #slider-content h2 {
    font-size: 110px;
    line-height: 100px;
  }
}

#slider-content span {
  display: none;
}

#slider-content .meta {
  display: inline-block;
  font-family: "Arial", sans-serif;
  font-size: 11px;
  letter-spacing: 5px;
  color: #88888a;
  text-transform: uppercase;
  position: relative;
}

@media screen and (min-width: 800px) {
  #slider-content .meta {
    font-size: 13px;
  }
}

#slider-content .meta:after {
  content: "";
  display: block;
  position: absolute;
  top: 5px;
  right: -55px;
  width: 45px;
  height: 2px;
  background-color: #393d40;
}

#slider-content #slide-status {
  margin-top: 10px;
  font-family: "acta-display", serif;
  font-weight: 400;
  font-size: 18px;
  color: white;
}

@media screen and (min-width: 800px) {
  #slider-content #slide-status {
    font-size: 34px;
  }
}

#pagination {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  right: 30px;
  z-index: 6;
}

#pagination button {
  display: block;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  border: 0;
  width: 16px;
  height: 16px;
  background-color: #ffffff;
  border-radius: 100%;
  padding: 0;
  margin: 30px 0;
  cursor: pointer;
  position: relative;
  opacity: 0.2;
  transition: opacity 0.2s ease-in-out;
  outline: none;
}

#pagination button:hover {
  opacity: 0.5;
}

#pagination button.active {
  opacity: 1;
}

#pagination button.active:before {
  width: 300%;
  height: 300%;
  opacity: 1;
}

#pagination button:before {
  content: "";
  display: block;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 100%;
  height: 100%;
  border-radius: 100%;
  border: 1px solid rgba(255, 255, 255, 0.2);
  opacity: 0;
  transition: opacity 0.4s ease-in-out, width 0.4s ease-in-out, height 0.4s ease-in-out;
}

/* Product section styles */
.product-section {
  padding: 60px 20px;
  background-color: #fff;
  color: #000;
  text-align: center;
  min-height: 500px;
}

.product-section h2 {
  font-family: "acta-display", serif;
  font-size: 36px;
  margin-bottom: 40px;
  color: #23272a;
}

.product-grid {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 30px;
  margin-top: 40px;
}

.product-card {
  width: 250px;
  background: #f8f8f8;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease;
}

.product-card:hover {
  transform: translateY(-5px);
}

.product-card img {
  width: 100%;
  height: 200px;
  object-fit: cover;
  border-radius: 10px;
  margin-bottom: 15px;
}

.product-card h3 {
  font-family: "acta-display", serif;
  font-size: 20px;
  margin-bottom: 10px;
  color: #23272a;
}

.product-card p {
  font-family: "Arial", sans-serif;
  font-size: 14px;
  color: #666;
  line-height: 1.5;
}

/* Loading animation */
.loading:before {
  content: "";
  position: fixed;
  z-index: 100000;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: black;
}

.loading:after {
  content: "";
  position: fixed;
  z-index: 100000;
  top: 50%;
  left: 50%;
  width: 60px;
  height: 60px;
  margin: -30px 0 0 -30px;
  pointer-events: none;
  border-radius: 50%;
  opacity: 0.4;
  background: white;
  animation: loaderAnim 0.7s linear infinite alternate forwards;
}

@keyframes loaderAnim {
  to {
    opacity: 1;
    transform: scale3d(0.5, 0.5, 1);
  }
}
  </style>
</head>
<body class="loading">

  <header>
    <div class="inner">
      <div class="logo">宇</div>
      <div class="burger"></div>
      <nav>
        <a class="active" href="#">Menu</a>
        <a href="#">About Us</a>
        <a href="#">Our Work</a>
        <a href="#">Contact</a>
      </nav>
      <a href="#" class="donate-link">Shop</a>
    </div>
  </header>

  <main>
    <div id="slider">
      <div class="slider-inner">
        <div id="slider-content">
          <div class="meta">Home</div>
          <h2 id="slide-title">Chef <br>Xiao Yu</h2>
          <span data-slide-title="0">Chef <br>Xiao Yu</span>
          <span data-slide-title="1">Plating <br>Masterpieces</span>
          <span data-slide-title="2">Finest <br>Dining</span>
          <span data-slide-title="3">Finest <br>Tools</span>
          <div class="meta">Status</div>
          <div id="slide-status">藍帶廚師 Le Cordon Bleu</div>
          <span data-slide-status="0">藍帶廚師</span>
          <span data-slide-status="1">Ready to Serve</span>
          <span data-slide-status="2">Chef Yu</span>
          <span data-slide-status="3">Only the best</span>
        </div>
      </div>

      <img src="image/demo1.jpg" data-mobile="image/demo1_m.webp" />
      <img src="image/demo2.jpg" data-mobile="image/demo2_m.webp" />
      <img src="image/demo3.jpg" data-mobile="image/demo3_m.webp" />
      <img src="image/demo4.jpg" data-mobile="image/demo4_m.webp" />

      <div id="pagination">
        <button class="active" data-slide="0"></button>
        <button data-slide="1"></button>
        <button data-slide="2"></button>
        <button data-slide="3"></button>
      </div>
    </div>

    <div class="product-section">
      <h2>Our Products - 產品和服務</h2>
      <div class="product-grid">
        <div class="product-card">
          <img src="image/tasting.jpg" alt="Gourmet Dish 1">
          <h3>Signature 招牌品嚐菜單</h3>
          <p>Experience Chef Yu's carefully crafted 7-course tasting menu featuring seasonal ingredients and innovative techniques.<br>體驗主廚精心製作的 7 道菜品嚐菜單，採用時令食材和創新技術烹製而成。</p>
        </div>
        <div class="product-card">
          <img src="image/teaching.jpg" alt="Gourmet Dish 2">
          <h3>Premium 烹飪課程</h3>
          <p>Learn the secrets behind French culinary techniques in an intimate setting with Chef Yu.<br>在與小宇師傅熱情的氛圍中學習小宇師傅烹飪技巧背後的秘密。</p>
        </div>
        <div class="product-card">
          <img src="image/privateChef.jpg" alt="Gourmet Dish 3">
          <h3>Private Chef 私廚服務</h3>
          <p>Bring the restaurant experience to your home with our exclusive private dining service.<br>透過我們獨有的私人用餐服務，將餐廳體驗帶到您的家中。</p>
        </div>
        <div class="product-card">
          <img src="https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=300&fit=crop" alt="Gourmet Dish 4">
          <h3>Catering 外燴服務</h3>
          <p>Elevate your special events with our professional catering featuring modern Fusion cuisine.<br>我們提供以現代融合美食為特色的專業餐飲服務，讓您的特別活動更加精彩。</p>
        </div>
      </div>
    </div>
  </main>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r83/three.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.4/TweenMax.min.js"></script>
<script>
// Mobile viewport height fix
function setVH() {
  let vh = window.innerHeight * 0.01;
  document.documentElement.style.setProperty('--vh', `${vh}px`);
}

// Mobile image switching function
function switchToMobileImages() {
  const isMobile = window.innerWidth <= 768;
  const images = document.querySelectorAll('#slider img');
  
  images.forEach(img => {
    if (isMobile && img.dataset.mobile) {
      img.src = img.dataset.mobile;
    } else {
      // Get original src from the img element's original src attribute
      const originalSrc = img.getAttribute('src').replace('_m.jpg', '.jpg');
      img.src = originalSrc;
    }
  });
}

// Set on load and resize
window.addEventListener('load', function() {
  setVH();
  switchToMobileImages();
});

window.addEventListener('resize', function() {
  setVH();
  switchToMobileImages();
});

window.addEventListener('orientationchange', function() {
  setTimeout(function() {
    setVH();
    switchToMobileImages();
  }, 100);
});

var displacementSlider = function displacementSlider(opts) {
  var vertex = "\n        varying vec2 vUv;\n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n    ";
  var fragment = "\n        \n        varying vec2 vUv;\n\n        uniform sampler2D currentImage;\n        uniform sampler2D nextImage;\n\n        uniform float dispFactor;\n\n        void main() {\n\n            vec2 uv = vUv;\n            vec4 _currentImage;\n            vec4 _nextImage;\n            float intensity = 0.3;\n\n            vec4 orig1 = texture2D(currentImage, uv);\n            vec4 orig2 = texture2D(nextImage, uv);\n            \n            _currentImage = texture2D(currentImage, vec2(uv.x, uv.y + dispFactor * (orig2 * intensity)));\n\n            _nextImage = texture2D(nextImage, vec2(uv.x, uv.y + (1.0 - dispFactor) * (orig1 * intensity)));\n\n            vec4 finalTexture = mix(_currentImage, _nextImage, dispFactor);\n\n            gl_FragColor = finalTexture;\n\n        }\n    ";
  var images = opts.images,
    image,
    sliderImages = [];
  var canvasWidth = images[0].clientWidth;
  var canvasHeight = images[0].clientHeight;
  var parent = opts.parent;
  var renderWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
  var renderHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
  var renderW, renderH;
  if (renderWidth > canvasWidth) {
    renderW = renderWidth;
  } else {
    renderW = canvasWidth;
  }
  renderH = canvasHeight;
  var renderer = new THREE.WebGLRenderer({
    antialias: false
  });
  renderer.setPixelRatio(window.devicePixelRatio);
  renderer.setClearColor(0x23272a, 1.0);
  renderer.setSize(renderW, renderH);
  parent.appendChild(renderer.domElement);
  var loader = new THREE.TextureLoader();
  loader.crossOrigin = "anonymous";
  
  // Function to load textures with mobile detection
  function loadTextures() {
    sliderImages = []; // Clear existing textures
    const isMobile = window.innerWidth <= 768;
    
    images.forEach(function (img) {
      const imageSrc = isMobile && img.dataset.mobile ? img.dataset.mobile : img.getAttribute("src");
      image = loader.load(imageSrc + "?v=" + Date.now());
      image.magFilter = image.minFilter = THREE.LinearFilter;
      image.anisotropy = renderer.capabilities.getMaxAnisotropy();
      sliderImages.push(image);
    });
    
    // Update material uniforms with new textures
    if (mat) {
      mat.uniforms.currentImage.value = sliderImages[currentSlide];
      mat.uniforms.nextImage.value = sliderImages[(currentSlide + 1) % sliderImages.length];
      mat.uniforms.currentImage.needsUpdate = true;
      mat.uniforms.nextImage.needsUpdate = true;
    }
  }
  
  // Initial texture loading
  loadTextures();
  var scene = new THREE.Scene();
  scene.background = new THREE.Color(0x23272a);
  var camera = new THREE.OrthographicCamera(renderWidth / -2, renderWidth / 2, renderHeight / 2, renderHeight / -2, 1, 1000);
  camera.position.z = 1;
  var mat = new THREE.ShaderMaterial({
    uniforms: {
      dispFactor: {
        type: "f",
        value: 0.0
      },
      currentImage: {
        type: "t",
        value: sliderImages[0]
      },
      nextImage: {
        type: "t",
        value: sliderImages[1]
      }
    },
    vertexShader: vertex,
    fragmentShader: fragment,
    transparent: true,
    opacity: 1.0
  });
  var geometry = new THREE.PlaneBufferGeometry(parent.offsetWidth, parent.offsetHeight, 1);
  var object = new THREE.Mesh(geometry, mat);
  object.position.set(0, 0, 0);
  scene.add(object);
  var currentSlide = 0;
  var isAnimating = false;
  var autoSlideInterval;

  var changeSlide = function(slideId) {
    if (isAnimating) return;
    
    isAnimating = true;
    
    // Update pagination
    document.getElementById("pagination").querySelectorAll(".active")[0].className = "";
    document.querySelectorAll("[data-slide='" + slideId + "']")[0].className = "active";
    
    // Update WebGL textures
    mat.uniforms.nextImage.value = sliderImages[slideId];
    mat.uniforms.nextImage.needsUpdate = true;
    
    TweenLite.to(mat.uniforms.dispFactor, 1, {
      value: 1,
      ease: "Expo.easeInOut",
      onComplete: function onComplete() {
        mat.uniforms.currentImage.value = sliderImages[slideId];
        mat.uniforms.currentImage.needsUpdate = true;
        mat.uniforms.dispFactor.value = 0.0;
        isAnimating = false;
      }
    });
    
    // Update text content
    var slideTitleEl = document.getElementById("slide-title");
    var slideStatusEl = document.getElementById("slide-status");
    var nextSlideTitle = document.querySelectorAll("[data-slide-title=\"".concat(slideId, "\"]"))[0].innerHTML;
    var nextSlideStatus = document.querySelectorAll("[data-slide-status=\"".concat(slideId, "\"]"))[0].innerHTML;
    
    TweenLite.fromTo(slideTitleEl, 0.5, {
      autoAlpha: 1,
      y: 0
    }, {
      autoAlpha: 0,
      y: 20,
      ease: "Expo.easeIn",
      onComplete: function onComplete() {
        slideTitleEl.innerHTML = nextSlideTitle;
        TweenLite.to(slideTitleEl, 0.5, {
          autoAlpha: 1,
          y: 0
        });
      }
    });
    
    TweenLite.fromTo(slideStatusEl, 0.5, {
      autoAlpha: 1,
      y: 0
    }, {
      autoAlpha: 0,
      y: 20,
      ease: "Expo.easeIn",
      onComplete: function onComplete() {
        slideStatusEl.innerHTML = nextSlideStatus;
        TweenLite.to(slideStatusEl, 0.5, {
          autoAlpha: 1,
          y: 0,
          delay: 0.1
        });
      }
    });
    
    currentSlide = slideId;
  };

  var startAutoSlide = function() {
    autoSlideInterval = setInterval(function() {
      var nextSlide = (currentSlide + 1) % sliderImages.length;
      changeSlide(nextSlide);
    }, 5000);
  };

  var stopAutoSlide = function() {
    if (autoSlideInterval) {
      clearInterval(autoSlideInterval);
    }
  };

  var addEvents = function addEvents() {
    var pagButtons = Array.from(document.getElementById("pagination").querySelectorAll("button"));
    
    pagButtons.forEach(function (el) {
      el.addEventListener("click", function () {
        stopAutoSlide(); // Stop auto-slide when user clicks
        var slideId = parseInt(this.dataset.slide, 10);
        changeSlide(slideId);
        setTimeout(startAutoSlide, 5000); // Restart auto-slide after 5 seconds
      });
    });
    
    // Start auto-slide
    setTimeout(startAutoSlide, 1000); // Start after 1 second delay
  };
  // Pause auto-slide on hover
  parent.addEventListener('mouseenter', stopAutoSlide);
  parent.addEventListener('mouseleave', function() {
    setTimeout(startAutoSlide, 1000);
  });

  addEvents();
  
  // Handle window resize and mobile image switching
  window.addEventListener("resize", function (e) {
    renderer.setSize(renderW, renderH);
    // Reload textures if switching between mobile/desktop
    const newIsMobile = window.innerWidth <= 768;
    const currentIsMobile = images[0].src.includes('_m.jpg');
    if (newIsMobile !== currentIsMobile) {
      loadTextures();
    }
  });
  var _animate = function animate() {
    requestAnimationFrame(_animate);
    renderer.render(scene, camera);
  };
  _animate();
};

imagesLoaded(document.querySelectorAll("img"), function () {
  document.body.classList.remove("loading");
  var el = document.getElementById("slider");
  var imgs = Array.from(el.querySelectorAll("img"));
  new displacementSlider({
    parent: el,
    images: imgs
  });
});
</script>
</body>
</html>
